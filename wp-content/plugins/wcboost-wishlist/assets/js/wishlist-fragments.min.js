jQuery(function(i){if(typeof wcboost_wishlist_fragments_params==="undefined"){return false}var t=function(){this.updateFragments=this.updateFragments.bind(this);this.getProductIds=this.getProductIds.bind(this);i(document.body).on("wishlist_fragments_refresh wishlist_updated",{wishlistFragmentsHandler:this},this.refreshFragments);i(window).on("pageshow",function(t){if(t.originalEvent.persisted){console.log("wishlist persisted");i(document.body).trigger("wishlist_fragments_refresh",[true])}});if("yes"===wcboost_wishlist_fragments_params.refresh_on_load){i(document.body).trigger("wishlist_fragments_refresh")}};t.prototype.refreshFragments=function(t,e){var s=t.data.wishlistFragmentsHandler;var r={};if("yes"===wcboost_wishlist_fragments_params.refresh_on_load||e){r.product_ids=s.getProductIds()}i.post({url:woocommerce_params.wc_ajax_url.toString().replace("%%endpoint%%","get_wishlist_fragments"),data:r,dataType:"json",timeout:wcboost_wishlist_fragments_params.request_timeout,success:function(t){if(!t.success){i(document.body).trigger("wishlist_fragments_failed");return}s.updateFragments(t.data.fragments);i(document.body).trigger("wishlist_fragments_refreshed")},error:function(){i(document.body).trigger("wishlish_fragments_ajax_error")}})};t.prototype.getProductIds=function(){var s=[];i(".wcboost-wishlist-button").each(function(t,e){s.push(e.dataset.product_id)});return s};t.prototype.updateFragments=function(t){i.each(t,function(t,e){i(t).replaceWith(i(e).data("wcboost_wishlist_refereshed",true))});i(document.body).trigger("wishlist_fragments_loaded")};new t});